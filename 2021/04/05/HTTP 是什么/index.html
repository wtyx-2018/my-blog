<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="HTTP 是什么, web前端">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>HTTP 是什么 | 武藤游戏の博客</title>
    <link rel="icon" type="image/png" href="/my-blog/favicon.png">

    <link rel="stylesheet" type="text/css" href="/my-blog/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/my-blog/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/my-blog/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/my-blog/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/my-blog/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/my-blog/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/my-blog/css/my.css">

    <script src="/my-blog/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/my-blog/" class="waves-effect waves-light">
                    
                    <img src="/my-blog/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">武藤游戏の博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/my-blog/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/my-blog/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/my-blog/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/my-blog/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/my-blog/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/my-blog/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>Contact</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/my-blog/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/my-blog/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">武藤游戏の博客</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/my-blog/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/my-blog/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/my-blog/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/my-blog/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/my-blog/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/my-blog/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/my-blog/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/my-blog/medias/featureimages/7.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">HTTP 是什么</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/my-blog/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">No tag</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2021-04-05
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="HTTP-是什么"><a href="#HTTP-是什么" class="headerlink" title="HTTP 是什么"></a>HTTP 是什么</h2><p>HTTP 是一种<strong>超文本传输协议</strong>，用于完成客户端和服务器端等等一系列的运作流程。而协议指的是规则的约定。可以说，Web 是建立在 HTTP 协议上进行通信的。</p>
<h2 id="HTTP-的诞生"><a href="#HTTP-的诞生" class="headerlink" title="HTTP 的诞生"></a>HTTP 的诞生</h2><p>我相信大家也是这样，在学一门技术之前都会去了解一下它的历史，下面来看看 HTTP 的发展史。</p>
<p>HTTP 诞生于 1989 年 3 月。是一个名叫蒂姆伯纳斯-李的哥们儿提出的，最初设想的基本理念是：借助多文档之间相互关联形成的超文本，连成可相互参阅的 WWW（World Wide Web，万维网）。简称 Web。</p>
<p>HTTP 0.9 在 1990 年问世。那时候的 HTTP 还没有作为正式的标准被建立。</p>
<p>HTTP 1.0 在 1996 年 5 月 正式作为标准。该协议标准现在仍然被广泛使用在服务器端。</p>
<p>HTTP 1.1 在 1997 年 1 月公布为当前主流的 HTTP 协议版本。</p>
<p>HTTP 2.0 在 2012 年 3 月 征集建议。</p>
<p>HTTP 2.0 在 同年的 9 月份 发布了第一个草案。</p>
<p>HTTP 2.0 在 2014 年 11 月实现了标准化。</p>
<h2 id="了解-TCP-IP"><a href="#了解-TCP-IP" class="headerlink" title="了解 TCP/IP"></a>了解 TCP/IP</h2><p>在理解 HTTP 之前，我们先简单的来了解一下 <strong>TCP/IP 协议族</strong>。一般使用的网络都是在 TCP/IP 协议的基础上运作的，而 HTTP 属于它内部的一个子集。</p>
<h2 id="TCP-IP-协议族"><a href="#TCP-IP-协议族" class="headerlink" title="TCP/IP 协议族"></a>TCP/IP 协议族</h2><p>在计算机和网络设备进行互相通信时，双方都必须基于相同的方法。比如，如何探测到通信目标，是哪边先发起通信、用什么语言进行通信、怎样结束通信等等一些规则都是先要确定好的。不同的硬件、操作系统之间的通信，所有的这一切都需要一种规则。而这种规则称为协议。</p>
<p>协议中包括：从电缆的规格到 IP 地址的选定方法、寻找异地用户的方法、双方建立通信的顺序，以及 Web 页面显示要处理的步骤，等等。将这些相关联的协议集合起来总称为 TCP/IP。</p>
<h2 id="TCP-IP-模型各层作用"><a href="#TCP-IP-模型各层作用" class="headerlink" title="TCP/IP 模型各层作用"></a>TCP/IP 模型各层作用</h2><p>TCP/IP 重要的点就是分层。有以下 4 层：<strong>应用层、传输层、网络层和数据链路层</strong>。</p>
<p><img src="https://static001.geekbang.org/infoq/5b/5bab5589e5ee4dae0c818e66d62ef064.jpeg?x-oss-process=image/resize,p_80/auto-orient,1" alt="img"></p>
<p>下面来介绍各层的作用。</p>
<ul>
<li><strong>应用层</strong>：应用层决定了向用户提供应用服务时通信的活动。比如，FTP(文件传输协议)和 DNS(域名解析系统)。HTTP 协议也在该层。</li>
<li><strong>传输层</strong>：传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传送。该层有两个不同的协议：TCP 传输控制协议和 UDP 用户数据协议。</li>
<li><strong>网络层</strong>：网络层用来处理在网络上的数据包。数据包是网络传输的最小数据单位。网络层的作用就是在多条路线中选出一条传输路线进行数据传输。</li>
<li><strong>链路层</strong>：用来处理连接网络的硬件部分。包括什么操作系统、硬件的设备、什么路由器啊之类的等等，都属于该层。</li>
</ul>
<p>TCP/IP 层次化的好处是：如果互联网由一个协议统一规划，某个地方需要改变设计时，就必须将所有部分整体替换掉。而分层之后只需要把变动的层替换掉。把各层之间的接口部分规划好之后，每层内部的设计就可以自由改动。比如，处于应用层上的应用可以只考虑分配给自己的任务，不用去考虑其他的问题。</p>
<h2 id="TCP-IP-通信传输流"><a href="#TCP-IP-通信传输流" class="headerlink" title="TCP/IP 通信传输流"></a>TCP/IP 通信传输流</h2><p>TCP/IP 协议进行通信时，会通过分层顺序和对方进行通信。客户端从应用层往下走，服务器端则从链路层往上走。看下面的图。</p>
<p><img src="https://static001.geekbang.org/infoq/a8/a889c278fc3e9bff3170a6489658713a.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<ol>
<li>首先客户端在应用层发出一个 HTTP 请求。</li>
<li>接着，在传输层接收到应用层的数据后进行分割，给每个报文打上标记序号以及端口号转发给网络层。</li>
<li>在网络层，添加通信目的地的 MAC 地址后转发给链路层。</li>
<li>接收端（也叫服务器端）的服务器在链路层接收到数据，按次序向上层发送，一直到应用层。传输到应用层才算真正接收到客户端发过来的 HTTP 请求。</li>
</ol>
<h2 id="和-HTTP-相关的协议"><a href="#和-HTTP-相关的协议" class="headerlink" title="和 HTTP 相关的协议"></a>和 HTTP 相关的协议</h2><p>在 HTTP 客户端向服务器端发送报文之前，需要用到 <strong>IP、TCP、DNS</strong> 这三个和 HTTP 密不可分的协议。</p>
<h2 id="IP-网络协议"><a href="#IP-网络协议" class="headerlink" title="IP 网络协议"></a>IP 网络协议</h2><p>IP（Internet Protocol）网络协议处于<strong>网络层</strong>。IP 协议的作用是把各种数据包传送给对方。但要保证正确的传送给对方，其中两个重要的条件是 IP 地址和 MAC 地址。可以把它想象成你家的地址，或者说你的电话号码。</p>
<p>IP 地址指的是节点被分配到的地址，MAC 地址指的是网卡所属的固定地址。IP 地址可以跟 MAC 地址进行配对。IP 地址是可变的，MAC 地址是不可变的。</p>
<blockquote>
<p>IP 和 IP 地址别搞混了，IP 是一种协议。而 IP 地址是则是每台计算机的标识</p>
</blockquote>
<h2 id="ARP-协议"><a href="#ARP-协议" class="headerlink" title="ARP 协议"></a>ARP 协议</h2><p>IP 间的通信依赖 MAC 地址。在网络上通信的双方很少会在同一个局域网，一般都是经过多台计算机或者网络设备中专才能连接到对方。而在中转的过程中，会利用下一站中转设备的 MAC 地址进行搜索下一个中转目标。而这时，会用到 <strong>ARP 协议</strong>。<strong>ARP 协议是一种用来解析地址的协议，通过通信方的 IP 地址就能反查出对应的 MAC 地址</strong>。</p>
<p>在到达通信目标前的中转过程中，计算机和路由器只能获取粗略的传输路线，这种机制叫做路由选择。</p>
<p>就跟你在淘宝上买东西是一样的道理。比如，你在淘宝网买了件衣服，快递公司会根据你的地址进行送货，在送货这个过程中，并不是直接送到你手里。而是经过各种什么杭州中转站然后又到深圳中转站，之后才送到你手里。</p>
<h2 id="TCP-协议"><a href="#TCP-协议" class="headerlink" title="TCP 协议"></a>TCP 协议</h2><p>TCP 协议处于传输层，主要的作用是<strong>提供可靠的字节流服务</strong>。字节流服务指的是，为了方便传输，将大块的数据分割成以报文段为单位的数据包进行管理。而可靠性的传输服务指的是，能够把数据准确可靠的传给对方。</p>
<p>为了准确的将数据传送给对方，三次握手就出现了。下图展示这个过程。</p>
<p><img src="https://static001.geekbang.org/infoq/9b/9b16bdf4fa5c706115389d5c44a458fe.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<ol>
<li>第一次握手：客户端先发送一个带 SYN 标志的数据包给对方。</li>
<li>第二次握手：服务器端收到之后，回传一个带有 SYN/ACK 标志的数据包表示传达确认信息。</li>
<li>第三次握手：最后，客户端再传回一个带 ACK 标志的数据包，表示 “握手” 结束。</li>
</ol>
<h2 id="DNS-服务"><a href="#DNS-服务" class="headerlink" title="DNS 服务"></a>DNS 服务</h2><p>DNS 服务和 HTTP 协议一样，处于应用层。它主要的作用是，将域名解析成 IP 地址。DNS 协议可以通过域名查找 IP 地址，也可以通过 IP 地址反查域名的服务。</p>
<p><img src="https://static001.geekbang.org/infoq/ff/ff68e6bb69786b8d8bc6067251b7b451.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<p>下面展示每个协议和 HTTP 协议的关系。</p>
<p><img src="https://static001.geekbang.org/infoq/54/54bdad95d29b2c0ba1b370f9ed8cb091.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<h2 id="什么是-URL-和-URI？"><a href="#什么是-URL-和-URI？" class="headerlink" title="什么是 URL 和 URI？"></a>什么是 URL 和 URI？</h2><ul>
<li><strong>URL</strong> 指的是<strong>统一资源定位符</strong>，是访问 Web 网站需要输入的网站地址。例如，<a target="_blank" rel="noopener" href="http://www.tutu.com./">http://www.tutu.com。</a></li>
<li><strong>URI</strong> 指的是<strong>统一资源标识符</strong>，全称为 Uniform Resource Identifier，它的作用是区分互联网中的不同资源。比如，HTML 文档、图像、视频片段、程序等等。而 <strong>URL</strong> 是 <strong>URI</strong> 的一个子集。</li>
</ul>
<h2 id="URI-格式"><a href="#URI-格式" class="headerlink" title="URI 格式"></a>URI 格式</h2><p>下图展示了 <strong>URI</strong> 的格式。</p>
<p><img src="https://static001.geekbang.org/infoq/7a/7a7557ee8d8fbf50ed96c34e71e07db9.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<p>URI.jpg</p>
<ul>
<li><strong>协议名</strong>：http:或 https:表示协议名称。不区分字母大小写，最后加上//。</li>
<li><strong>登录信息</strong>：user:pass@ 表示获取服务器资源的用户和密码。但不推荐使用，因为不安全。</li>
<li><strong>服务器地址</strong>：服务器地址有三种：</li>
<li>以域名的形式 <a target="_blank" rel="noopener" href="http://www.tutu.com/">www.tutu.com</a>;</li>
<li>以 IPv4 192.168.0.1 地址名;</li>
<li>以[0:0:0:0:0:0:1]这种方括号括起来的 IPv6 地址;</li>
<li><strong>服务器端口号</strong>：:8080 表示端口号。</li>
<li><strong>文件路径</strong>：/html/index.html 表示服务器文件路径，资源的访问位置。</li>
<li><strong>查询字符串</strong>：?userId=1 表示文件路径中的参数。?后面以 key=value 的形式。如果后面还需要加参数，用 &amp;拼接。</li>
<li><strong>片段标识符</strong>：#cn1 表示文件中的某个位置。就是平时的网页锚点定位。</li>
</ul>
<h2 id="HTTP-基础"><a href="#HTTP-基础" class="headerlink" title="HTTP 基础"></a>HTTP 基础</h2><p>HTTP 是一种无状态的协议，对发送过的请求/响应都不做持久化处理。</p>
<h2 id="持久化连接"><a href="#持久化连接" class="headerlink" title="持久化连接"></a>持久化连接</h2><p>HTTP 1.1 中的所有连接都是默认开启的（keep-alive）。通过请求/响应头部的 Connection 字段可以查看是否开启持久化连接（后面会介绍该字段的值），而在 HTTP1.0 中是默认关闭的（close）。</p>
<p>它的特点是，不管是客户端还是服务器端，只要其中的一端没有提出断开连接，那么就会保持 TCP 连接。好处是，减少 TCP 连接的重复建立和断开连接造成的额外开销，减轻服务器压力。这样使得 HTTP 请求和响应速度更快结束，也提高页面的显示速度。</p>
<h2 id="管线化"><a href="#管线化" class="headerlink" title="管线化"></a>管线化</h2><p>管线化是不用等待响应就可以发送下一个请求，也就是并行处理。不用一个接一个的等待响应，管线化比持久化连接还要更快。</p>
<h2 id="HTTP-报文"><a href="#HTTP-报文" class="headerlink" title="HTTP 报文"></a>HTTP 报文</h2><p>HTTP 一共有两种报文：请求报文、响应报文。报文又分为报文头部和报文主体，报文主体是可选的。报文包含了以下三个部分。</p>
<ul>
<li><strong>起始行</strong>（start line）有以下两种类型。</li>
<li>请求行：请求的方法、请求的 URL、HTTP 的版本</li>
<li>响应行：HTTP 版本、状态码</li>
<li><strong>头部字段</strong>（header）：一些头部信息，以 key: value 的形式。</li>
<li><strong>主体</strong>（body）：被发送的数据。</li>
</ul>
<p><img src="https://static001.geekbang.org/infoq/c8/c8dfc174f33e02cd6202993982812bec.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<p>这张图是以请求报文为例。</p>
<h2 id="HTTP-的请求方法"><a href="#HTTP-的请求方法" class="headerlink" title="HTTP 的请求方法"></a>HTTP 的请求方法</h2><ul>
<li>GET：获取服务器资源。</li>
<li>POST：提交信息给服务器。</li>
<li>PUT：传输文件。</li>
<li>HEAD：和 GET 方法一样。但是只返回响应头部。作用是确定 URL 的有效性和资源更新的时间。</li>
<li>DELETE：删除指定的资源。</li>
<li>OPTIONS：查询请求服务器指定的资源所支持的方法。</li>
<li>TRACE：用来确认连接过程中发生的一些操作。</li>
<li>CONNECT：建立连接渠道，用于代理服务器。</li>
</ul>
<h2 id="HTTP-状态码"><a href="#HTTP-状态码" class="headerlink" title="HTTP 状态码"></a>HTTP 状态码</h2><h2 id="1xx"><a href="#1xx" class="headerlink" title="1xx"></a>1xx</h2><p>1XX 表示接收的请求正在处理。</p>
<h2 id="2xx-成功"><a href="#2xx-成功" class="headerlink" title="2xx 成功"></a>2xx 成功</h2><ul>
<li>200 OK：表示客户端发送的请求在服务器端被正常处理了。</li>
<li>204 No Content：表示请求被处理成功，但没有资源可返回。</li>
<li>206 Partial Content：表示客户端只获取文件的一部分内容，而服务器成功执行了这部分的 GET 请求。响应报文中含 Content-Range 指定部分的实体内容。</li>
</ul>
<h2 id="3xx-重定向"><a href="#3xx-重定向" class="headerlink" title="3xx 重定向"></a>3xx 重定向</h2><ul>
<li>301 Moved Permanenty：永久重定向。表示请求的资源已经被分配了新的 URL，以后就使用资源现在所指的 URL。</li>
<li>302 Found：临时重定向。表示请求的资源被分配了新的 URL。</li>
<li>303 See Other：表示请求的资源存着另一个 URL，应该用 GET 方法获取请求的资源。</li>
<li>304 Not Modified：表示请求已经找到，但不符合条件请求。协商缓存就会返回这个状态码。</li>
<li>307 Temporary Redirect：临时重定向，和 302 类似。但是补鞥呢改变请求方法。</li>
</ul>
<blockquote>
<p>当 301、302、303 响应状态码返回时，几乎所有浏览器都会将 POST 改为 GET，并删除请求报文中的主体，之后请求会自动再次发送。301、302 标准是禁止把 POST 改成 GET 的，但实际使用的时候大家都会这么做。</p>
</blockquote>
<h2 id="4xx-客户端错误"><a href="#4xx-客户端错误" class="headerlink" title="4xx 客户端错误"></a>4xx 客户端错误</h2><ul>
<li>400 Bad Request：表示请求报文中存在语法错误。</li>
<li>401 Unauthorized：表示发送的请求要通过 HTTP 认证的认证消息。如果之前请求过一次，就表示用户认证失败。</li>
<li>403 Forbidden：表示对请求资源的访问被服务器拒绝。</li>
<li>404 Not Found：表示服务器上无法找到请求的资源。</li>
</ul>
<h2 id="5xx-服务器错误"><a href="#5xx-服务器错误" class="headerlink" title="5xx 服务器错误"></a>5xx 服务器错误</h2><ul>
<li>500 Internal Serve Error：表示服务器端在执行请求时发生错误。</li>
<li>503 Service Unavailable：表示服务器暂处于超负荷或者正在进行停机维护。</li>
</ul>
<h2 id="和-HTTP-相关-Web-服务器"><a href="#和-HTTP-相关-Web-服务器" class="headerlink" title="和 HTTP 相关 Web 服务器"></a>和 HTTP 相关 Web 服务器</h2><p>HTTP 进行通信时，除了客户端和服务器端这两个之外，还有一些用于通信数据转发的应用程序。例如<strong>代理、网关、隧道和缓存</strong>。</p>
<h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><p>代理是一种具有转发功能的应用程序，它存在于客户端和服务器端之间，相当于一个中间人。它将客户端发送过来的请求并转发给服务器端。当然，它也会将服务器端返回的响应转发给客户端。</p>
<p><img src="https://static001.geekbang.org/infoq/11/115bc7180a58883f1c4942da06e4a2c6.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<p>每次通过代理服务器转发请求或响应时，头部都会出现 Via 这个字段。</p>
<h2 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h2><p>网关是一种特殊的服务器，作为其他服务器的中间实体使用。用于将 HTTP 请求转化成其他协议通信。网关接收请求时就好像自己的资源的源服务器一样对请求做处理。</p>
<p><img src="https://static001.geekbang.org/infoq/2e/2ee0bffc0c8face181fafd9e196deb6d.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<h2 id="隧道"><a href="#隧道" class="headerlink" title="隧道"></a>隧道</h2><p>隧道是可按要求建立一条和其他服务器的通信线路，到时候使用 SSL 加密进行通信。隧道的目的是保证客户端和服务器进行安全的通信。</p>
<p><img src="https://static001.geekbang.org/infoq/b5/b53b2f3d9e05cd1a0616134226084efa.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><p>缓存是指代理服务器或客户端本地磁盘中保存的资源副本。利用缓存可以减少向源服务器的访问，主要目的是减少网络带宽的流量和通信时间。</p>
<p>缓存服务器是代理服务器的一种，当代理转发从服务器返回的响应时，会保存一份资源的副本。缓存服务器的优点在于通过缓存可以避免多次从源服务器转发资源。因此客户端可就近从缓存服务器上获取资源，而源服务器也不必多次处理相同的请求。</p>
<h2 id="缓存的有效期"><a href="#缓存的有效期" class="headerlink" title="缓存的有效期"></a>缓存的有效期</h2><p>每当源服务器上的资源更新时，如果还是用不变的缓存，那就会变成返回更新前的旧资源。</p>
<p>即使存在缓存，也会因为客户端的要求、缓存的有效期等等一些因素，向源服务器确认资源的有效性。如果缓存的资源已过期，缓存服务器会向源服务器上获取新的资源。</p>
<h2 id="客户端缓存"><a href="#客户端缓存" class="headerlink" title="客户端缓存"></a>客户端缓存</h2><p>这里的客户端缓存指的是浏览器中的缓存。浏览器缓存如果未过期，就不用向源服务器请求相同的资源，直接获取缓存在本地磁盘中的资源。当资源过期时，会向源服务器确认资源的有效性。如果缓存的资源过期，就会再次向源服务器发起资源请求。</p>
<h2 id="内容协商"><a href="#内容协商" class="headerlink" title="内容协商"></a>内容协商</h2><p>内容协商机制是指客户端和服务器端就响应的资源内容进行互相协商，然后提供客户端最合适的资源。内容协商会以语言、字符集、编码方式等。</p>
<p>主要使用的请求头有：</p>
<ul>
<li>Accept</li>
<li>Accept-Charset</li>
<li>Accept-Language</li>
<li>Content-Language</li>
</ul>
<p>内容协商技术有下面三种类型。</p>
<ul>
<li>服务器驱动协商（Server-driven Negotiation）</li>
<li>由服务器进行内容协商。</li>
<li>客户端启动协商（Agent-driven Negotiation）</li>
<li>由客户端进行内容协商。</li>
<li>透明协商 服务器驱动和客户端驱动的结合体，由服务器和客户端进行内容协商的一种方法。</li>
</ul>
<h2 id="End-to-end-头部和-Hop-by-hop-头部"><a href="#End-to-end-头部和-Hop-by-hop-头部" class="headerlink" title="End-to-end 头部和 Hop-by-hop 头部"></a>End-to-end 头部和 Hop-by-hop 头部</h2><p>HTTP 头字段定义成缓存代理和非缓存代理。分为两种类型。</p>
<ul>
<li><strong>端到端头部 End-to-end</strong> 分在这个类别中的头部会转发给请求或响应对应的最终接收目标，而且必须保存在缓存生成的响应中，另外规定它必须被转发。</li>
<li><strong>逐跳头部 Hop-by-hop</strong> 分在这个类别中的头部只对单次转发有效，会因通过缓存或代理而不转发。在 HTTP 1.1 和之后的版本中，如果使用 Hop-by-hop 头，就要提供 Connection 头字段。</li>
</ul>
<p>除了下面 8 个头字段外，其他所有字段都属于端到端头部。</p>
<ul>
<li>Connection</li>
<li>Keep-Alive</li>
<li>Proxy-Authenticate</li>
<li>Proxy-Authorization</li>
<li>Trailer</li>
<li>TE</li>
<li>Transfer-Encoding</li>
<li>Upgrade</li>
</ul>
<h2 id="HTTP-通用头部字段"><a href="#HTTP-通用头部字段" class="headerlink" title="HTTP 通用头部字段"></a>HTTP 通用头部字段</h2><p>下面列出请求/响应头都会出现的字段，这些字段都含有重要的信息。</p>
<h2 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h2><p>Cache-Control 表示资源的缓存操作，参数是可选的，如果存在多个参数的话，以,分隔开。</p>
<h2 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a>请求头</h2><p>在请求头中使用 Cache-Control 字段时，它的值如下：</p>
<ul>
<li>no-cache：不使用强缓存，强制向源服务器再次验证缓存的资源是否过期（走协商缓存）。</li>
<li>no-store：不使用任何缓存，每次都向源服务器获取最新的资源。</li>
<li>max-age：以秒为单位。表示缓存的资源没有超过指定的时间，客户端就从缓存中获取资源。</li>
<li>min-fresh：以秒为单位。要求代理服务器返回至少还没过指定时间的缓存资源。</li>
<li>max-stale：即使是过期的资源，也照样接收。</li>
<li>only-if-cached：告诉代理服务器，从缓存中获取资源（如果有）。</li>
<li>no-transform：不能对资源进行转换，可以防止缓存或代理压缩图片等类似操作。</li>
</ul>
<h2 id="响应头"><a href="#响应头" class="headerlink" title="响应头"></a>响应头</h2><p>在响应头中使用 Cache-Control 字段时，它的值如下：</p>
<ul>
<li>public：资源可被浏览器和代理服务器进行缓存。</li>
<li>private：资源只可以被浏览器进行缓存。其他都不可以。</li>
<li>no-cache：可以缓存，但每次使用前要向源服务器验证缓存资源是否过期。</li>
<li>s-maxage：只提供给代理服务器，表示代理服务器中的资源过期时长，用 s-maxage 后，会忽略 max-age 和 Expires 字段。</li>
<li>max-age：以秒为单位。设置缓存时间，如果没超过该时间，不用向服务器请求资源。如果超过，就证明资源已过期。如果响应头出现 Expires 字段，在 HTTP 1.1 中会有限处理 max-age，而 HTTP1.0 中则相反。</li>
<li>must-revalidate：可以缓存，但必须向源服务器再次验证。如果请求失败，则返回 504 状态码。该字段会忽略 max-stale。</li>
<li>proxy-revalidate：要求缓存服务器对缓存的响应有效性进行确认。</li>
<li>no-transform：不能对资源进行转换，可以防止缓存或代理压缩图片等类似操作。</li>
</ul>
<h2 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h2><p>Connection 字段决定当前 TCP 连接 完成后，是否关闭连接。有以下两种。</p>
<ul>
<li>keep-Alive：持久化连接。</li>
<li>close：TCP 连接完成后，立马关闭连接。</li>
</ul>
<h2 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h2><p>Date 字段的值为 GMT 时间日期格式，表示 HTTP 报文创建的时间和日期。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Date: Tue, 13 Apr 2021 12:35:41 GMT</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Pragma"><a href="#Pragma" class="headerlink" title="Pragma"></a>Pragma</h2><p>Pragma 是用来向后兼容只支持 HTTP1.0 协议的缓存服务器。它的效果和 Cache-Control 一样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pragma: no-cache</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Upgrade"><a href="#Upgrade" class="headerlink" title="Upgrade"></a>Upgrade</h2><p>Upgrade 用于查看 HTTP 协议或者其他协议是否可以使用更高的版本进行通信。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Upgrade: HTTP&#x2F;2.0Connection: Upgrade &lt;!-- 表示删除了Upgrade后再转发 --&gt;</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Via"><a href="#Via" class="headerlink" title="Via"></a>Via</h2><p>Via 用于跟踪客户端和服务器端之间的请求和响应报文的传输路径，还可以避免请求循环的发生。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 经过单个代理服务器 --&gt;Via: 1.0 gw.hackr.jp(Squid&#x2F;3.1)</span><br><span class="line">&lt;!-- 经过多个代理服务器 --&gt;Via: 1.0 gw.hackr.jp(Squid&#x2F;3.1), 1.1 al.example.com(Squid&#x2F;2.7)</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<p>经过代理服务器 A 时，Via 头部附加了 “1.0 gw.hackr.jp(Squid/3.1)” 这样的字符串值。行头 1.0 指的是接收请求的服务器上应用的 HTTP 协议版本。如果经过多个代理服务器的话，这些信息会后面追加。</p>
<h2 id="Warning"><a href="#Warning" class="headerlink" title="Warning"></a>Warning</h2><p>Warning 字段告诉用户一些与缓存有关的警告。</p>
<h2 id="请求头字段"><a href="#请求头字段" class="headerlink" title="请求头字段"></a>请求头字段</h2><h2 id="Accept"><a href="#Accept" class="headerlink" title="Accept"></a>Accept</h2><p>Accept 请求头用来告诉服务器，客户端能处理的内容类型。下面列出几种媒体类型。</p>
<ul>
<li>文本文件: text/html、text/plain、text/css、application/xhtml+xml、application/xml 等等。</li>
<li>图片文件: image/jpeg、image/gif、image/png;</li>
<li>视频文件: video/mpeg、video/quicktime;</li>
<li>二进制文件：application/octet-stream、application/zip;</li>
</ul>
<p>当值为*/*，表示客户端可以是任意内容类型。当值为 image/*，用来代表任何其他图片类型。</p>
<p>如果想给显示的媒体类型增加优先级，通过用 q=表示权重值，用分号（;）分隔开。权重值的范围是 0~1，可以精确到小数点后 3 位，1 是最大值。没有指定权重值时，默认权重是 q=1.0。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Accept: text&#x2F;html, appliaction&#x2F;json;q&#x3D;0.9</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Accept-Charset"><a href="#Accept-Charset" class="headerlink" title="Accept-Charset"></a>Accept-Charset</h2><p>Accept-Charset 请求头用来告诉服务器，客户端可处理的字符集类型。另外，可以一次性指定多种字符集。和 Accept 一样，通过 q 值来表示优先级。该头部应用于内容协商机制的服务器驱动协商。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Accept-Charset: iso-8859-1</span><br><span class="line">Accept-Charset: iso-8859-1;q&#x3D;0.5</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Accept-Encoding"><a href="#Accept-Encoding" class="headerlink" title="Accept-Encoding"></a>Accept-Encoding</h2><p>Accept-Encoding 请求头用来告诉服务器，客户端能理解的内容编码方式。可以一次性指定多种内容编码，有以下几种编码。</p>
<ul>
<li><strong>gzip</strong>：由文件压缩程序 gzip 生成的编码格式，使用 Lempel-Ziv 算法以及 32 位循环冗余验证。</li>
<li><strong>compress</strong>：由 UNIX 文件压缩程序 compress 生成的编码方式，采用 Lempel-Ziv-Welch 算法。</li>
<li><strong>deflate</strong>：组合使用 zlib 格式以及由 deflate 压缩算法生成的编码方式。</li>
<li><strong>indentity</strong>：不执行压缩或不会变化的默认编码格式。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Accept-Encoding: gzip, deflate</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<p>和 Accept 一样，用 q 值来设置优先级。还有使用星号（*），表示指定任意的编码格式。</p>
<h2 id="Accept-Language"><a href="#Accept-Language" class="headerlink" title="Accept-Language"></a>Accept-Language</h2><p>Accept-Language 请求头用来告诉服务器，客户端可以理解的自然语言集（指中文和英文集），以及自然语言集的优先级。和 Accept 一样的，可指定多个自然语言集。使用 q 值设置优先级。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Accept-Language: zh-CN,zh;q&#x3D;0.9;q&#x3D;0.8</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<p>客户端在服务器有中文版的情况下，会请求返回中文版的响应，如果没有，则返回英文版。</p>
<h2 id="Authorization"><a href="#Authorization" class="headerlink" title="Authorization"></a>Authorization</h2><p>Authorization 用来告诉服务器，用户代理的认证信息（证书值）。通常会在服务器返回 401 状态码响应后，把头部字段 Authorization 添加到请求中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Authorization: Basic dWVub3NlbjpwYXNzd29yZA&#x3D;&#x3D;</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Expect"><a href="#Expect" class="headerlink" title="Expect"></a>Expect</h2><p>Expect 用来告诉服务器，只有在满足这个条件的情况下才会处理请求。如果服务器不能满足客户端的要求，会返回 417 状态码。目前只规定了 100-continue 这个条件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Expect: 100-continue</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="From"><a href="#From" class="headerlink" title="From"></a>From</h2><p>From 字段表示用户代理的用户的电子邮箱地址，目的是为了显示搜索引擎用户代理的负责人的电子邮箱联系方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">From: info@hackr.jp</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h2><p>Host 请求头指明了请求的资源所在的服务器主机名和端口号。如果服务器没设置主机名，会发送一个空值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Host: www.tutu.com</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="If-Match"><a href="#If-Match" class="headerlink" title="If-Match"></a>If-Match</h2><p>像这种 If-xxxx 开头的请求头字段，都是条件请求。服务器接收到附带条件的请求后，只判断条件是真时才会执行请求。</p>
<p>If-Match 字段用于和服务器资源的 ETag 值做对比时，ETag 值和 If-Match 的值相等时才会处理该请求。否则返回 412 状态码。通过用星号（*）的方式，表示只要资源存在就处理请求，但服务器会忽略掉 ETag 的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">If-Match: &quot;123456&quot;</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="If-Modified-Since"><a href="#If-Modified-Since" class="headerlink" title="If-Modified-Since"></a>If-Modified-Since</h2><p>If-Modified-Since 用于确定代理服务器或客户端的资源有效性。在指定的时间之后，请求的资源发生改变时，就处理请求。如果资源都没有改变，则返回 304 状态码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">If-Modified-Since: Tue, 13 Apr 2021 12:35:41 GMT</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="If-None-Match"><a href="#If-None-Match" class="headerlink" title="If-None-Match"></a>If-None-Match</h2><p>If-None-Match 和 If-Match 相反，只有服务器资源的 ETag 的值和 If-None-Match 的值不一样时，才会处理该请求。在 GET 和 HEAD 请求方法中加入该字段可以获取最新的资源。</p>
<h2 id="If-Range"><a href="#If-Range" class="headerlink" title="If-Range"></a>If-Range</h2><p>If-Range 用于告诉服务器，如果 If-Range 字段的值和请求资源的 ETag 值或时间一样时，就会作为范围请求处理（Range 字段规定请求多少字节的数据）。否则，忽略范围请求，返回全部资源。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">If-Range: &quot;123456&quot;Range: bytes&#x3D;5001-10000</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="If-Unmodified-Since"><a href="#If-Unmodified-Since" class="headerlink" title="If-Unmodified-Since"></a>If-Unmodified-Since</h2><p>If-Unmodified-Since 字段用来告诉服务器，只有当请求资源在指定的时间之后没有修改的情况下，才会处理请求。如果在指定的时间后发生了修改，则返回 412 状态码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">If-Unmodified-Since: Tue, 13 Apr 2021 12:35:41 GMT</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Proxy-Authorization"><a href="#Proxy-Authorization" class="headerlink" title="Proxy-Authorization"></a>Proxy-Authorization</h2><p>Proxy-Authorization 字段包含了用户代理提供给代理服务器用于身份验证的凭证。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Proxy-Authorization: Basic dGlwOjkpNLAGfFY5</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h2><p>Range 请求头字段表示获取资源的哪一部分。服务器收到带有 Range 字段的请求后，会在处理请求之后返回 206 状态码。如果无法处理，则返回 200 状态码并把全部资源返回。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Range: bytes&#x3D;5001-10000 &lt;!-- bytes&#x3D;5001-10000为资源的字节 --&gt;</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h2><p>Referer 字段表示请求的 URL 是从哪个 Web 页面发起的。服务器通过 Referer 字段来标识访问来源，进行统计分析、日志记录和缓存优化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Referer: www.tutu.com &lt;!-- 请求是由www.tutu.com发起的 --&gt;</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="TE"><a href="#TE" class="headerlink" title="TE"></a>TE</h2><p>TE 表示客户端能够处理响应的传输编码方式以及优先级。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TE: gzip, deflate;q&#x3D;0.5</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User-Agent"></a>User-Agent</h2><p>User-Agent 字段用于把请求的浏览器和用户代理名称等信息传给服务器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User-Agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 11_2_3) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;89.0.4389.128 Safari&#x2F;537.36</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="响应头字段"><a href="#响应头字段" class="headerlink" title="响应头字段"></a>响应头字段</h2><h2 id="Accept-Ranges"><a href="#Accept-Ranges" class="headerlink" title="Accept-Ranges"></a>Accept-Ranges</h2><p>Accept-Ranges 表示服务器端能处理指定范围内的资源。有两个值：bytes 和 none。none 表示不能处理指定范围内的请求。</p>
<h2 id="Age"><a href="#Age" class="headerlink" title="Age"></a>Age</h2><p>Age 表示源服务器再多久前返回过资源。单位为秒。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Age: 3600</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h2><p>ETag 表示资源的特定标识符，服务器会给每份资源都分配对应的 ETag 值。当资源发生变化时，ETag 值也会改变。例如，访问同一个 URL 的网站同时具备有中英文版，当切换中文时，会返回中文的资源（ETag: user-chi），而切换到英文时，返回的是英文的资源（ETag: user-us）。</p>
<h2 id="强弱-ETag"><a href="#强弱-ETag" class="headerlink" title="强弱 ETag"></a>强弱 ETag</h2><ul>
<li><strong>强 ETag</strong>: 不管资源发生了什么变化都会改变其值。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ETag: &quot;user-123456&quot;</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<ul>
<li><strong>弱 ETag</strong>: 用于资源是否相同，只有资源发生了根本改变，产生差异时才会改变 ETag 值。字段值最开头会添加 W/的字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ETag: W&#x2F;&quot;user-123456&quot;</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Location"><a href="#Location" class="headerlink" title="Location"></a>Location</h2><p>Location 字段表示需要将页面重定向到某个地址，一般都是响应码为 3xx 的响应才有用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Location: www.baidu.com &lt;!-- 重定向到www.baidu.com --&gt;</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Proxy-Authenticate"><a href="#Proxy-Authenticate" class="headerlink" title="Proxy-Authenticate"></a>Proxy-Authenticate</h2><p>Proxy-Authenticate 字段表示获取代理服务器的资源要通过身份验证的方式。</p>
<h2 id="Retry-After"><a href="#Retry-After" class="headerlink" title="Retry-After"></a>Retry-After</h2><p>Retry-After 字段表示客户端应该在多久之后再次请求。配合 503 和 3xx 状态码响应一起使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Retry-After: 120</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h2><p>Server 字段表示处理请求的服务器所用到的软件相关信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Server: Apache&#x2F;2.2.17</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Vary"><a href="#Vary" class="headerlink" title="Vary"></a>Vary</h2><p>Vary 字段可以对缓存进行控制。从代理服务器收到源服务器返回含有 Vary 指定项的响应后，如果要进行缓存，那么会对请求中含有 Vary 指定头部字段的请求返回缓存。即使对相同资源发起请求，如果 Vary 指定的头部字段不相同，就必须从源服务器重新获取资源。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vary: Accept-Language</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="实体头字段"><a href="#实体头字段" class="headerlink" title="实体头字段"></a>实体头字段</h2><h2 id="Allow"><a href="#Allow" class="headerlink" title="Allow"></a>Allow</h2><p>Allow 用于告诉客户端，资源所支持的 HTTP 方法，如果服务器收到不支持的 HTTP 方法时，会返回 405 状态码作为响应。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Allow: GET, DELETE</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Content-Encoding"><a href="#Content-Encoding" class="headerlink" title="Content-Encoding"></a>Content-Encoding</h2><p>Content-Encoding 字段表示服务器对实体的主体部分用的内容编码方式。内容编码在 Accept-Encoding 中已经介绍过，一共有 4 种。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Encoding: gzip</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Content-Language"><a href="#Content-Language" class="headerlink" title="Content-Language"></a>Content-Language</h2><p>Content-Language 字段表示实体主体使用的自然语言。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Language: zh-CN</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Content-Length"><a href="#Content-Length" class="headerlink" title="Content-Length"></a>Content-Length</h2><p>Content-Length 表示实体主体部分的大小（以字节为单位）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Length: 1500</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Content-Location"><a href="#Content-Location" class="headerlink" title="Content-Location"></a>Content-Location</h2><p>Content-Location 字段表示要返回数据的地址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Location: https:&#x2F;&#x2F;www.tutu.com&#x2F;index.html</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Content-Range"><a href="#Content-Range" class="headerlink" title="Content-Range"></a>Content-Range</h2><p>Content-Range 字段表示的是一个数据片段在整个文件中的位置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Range: bytes 5001-10000&#x2F;10000</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Content-type"><a href="#Content-type" class="headerlink" title="Content-type"></a>Content-type</h2><p>Content-type 字段表示实体主体中对象的媒体类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-type: text&#x2F;html; charset&#x3D;UTF-8</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h2><p>Expires 字段会把资源失效的日期告诉客户端。在这个日期后，资源就会过期。也就是说，在指定的日期内可以从浏览器缓存中获取资源。如果超过了这个日期，就必须向服务器发起资源请求。如果头部存在 Cache-Control: max-age 时，会优先处理 max-age 指令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Expires: Tue, 13 Apr 2021 12:35:41 GMT</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified"></a>Last-Modified</h2><p>Last-Modified 字段表示资源最后修改的时间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Last-Modified: Tue, 13 Apr 2021 12:35:41 GMT</span><br></pre></td></tr></table></figure>

<p>复制代码</p>
<h2 id="HTTP-缓存"><a href="#HTTP-缓存" class="headerlink" title="HTTP 缓存"></a>HTTP 缓存</h2><p>HTTP 缓存可分为<strong>强缓存</strong>和<strong>协商缓存</strong>，主要用于加快资源的获取速度，提高用户体验，减少网络连接，缓解服务器压力。</p>
<h2 id="强缓存"><a href="#强缓存" class="headerlink" title="强缓存"></a>强缓存</h2><p>对强缓存来说，浏览器会判断请求的资源是否在有效期内。如果是在有效期内，就直接从缓存中读取资源，不用向服务器发送资源请求。强缓存通过 Expires、Cache-Control 和 Pragma 这三个头部字段设置。</p>
<h2 id="Cache-Control-1"><a href="#Cache-Control-1" class="headerlink" title="Cache-Control"></a>Cache-Control</h2><p>Cache-Control 头部字段在上面也详细介绍过在各端所具备的属性值。下面来列出最常见的几个值。</p>
<ul>
<li>public: 该资源可以被浏览器和代理服务器进行缓存。</li>
<li>private: 该资源只可以被浏览器缓存，其他都不可以。</li>
<li>no-cache: 不使用强缓存，强制向源服务器再次验证缓存的有效性。这个值表示走协商缓存。</li>
<li>no-store: 不使用任何缓存，每次都向源服务器获取最新资源。</li>
<li>max-age: 如果缓存的资源没有超过规定的时间，客户端就从缓存中获取资源。以秒为单位。</li>
<li>s-maxage: 只适用于代理服务器，表示代理服务器中的资源过期时长，用了 s-maxage 后，会忽略 max-age 和 Expires 字段。</li>
</ul>
<h2 id="Expires-1"><a href="#Expires-1" class="headerlink" title="Expires"></a>Expires</h2><p>Expires 字段的值是一个 GMT 格式的时间日期，将资源失效的日期告诉客户端，客户端收到带有该字段的响应体后进行缓存。后续客户端发起相同的资源请求，会用 Expires 的值和本地时间做对比，如果该请求的本地时间小于 Expires 的值，就直接用缓存中的资源，不用向服务器发起请求。</p>
<p>Expires 的值会产生一个问题。如果修改了本地时间，就会导致客户端和服务器端的时间不一致，那么对于缓存过期的判断就无法和预期一样了。</p>
<p>Expires 在三者中优先级最低。</p>
<h2 id="Pragma-1"><a href="#Pragma-1" class="headerlink" title="Pragma"></a>Pragma</h2><p>Pragma 可以看上面的介绍，这里不过多讲解。</p>
<p>强缓存在 Chrome 中会返回 200 状态码并且有两种情况。</p>
<ul>
<li>memory cache: 只要页面不关闭，就会从浏览器内存中获取资源。</li>
<li>disk cache: 从磁盘中读取缓存资源。</li>
</ul>
<p><img src="https://static001.geekbang.org/infoq/34/3475b406b9e89bb571e0d1242f9c9b8a.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<p>用了强缓存后，如果服务器端的资源更新了，客户端是不知道的，而且在过期之前都会用缓存中的资源。可以通过 Ctrl + F5 强制刷新。</p>
<h2 id="协商缓存"><a href="#协商缓存" class="headerlink" title="协商缓存"></a>协商缓存</h2><p>协商缓存是在用本地缓存之前，会向服务器发起一次 GET 请求，验证浏览器保存在本地的资源是否过期。</p>
<h2 id="last-modified-和-if-unmodified-sine"><a href="#last-modified-和-if-unmodified-sine" class="headerlink" title="last-modified 和 if-unmodified-sine"></a>last-modified 和 if-unmodified-sine</h2><p>一般情况下是用请求资源的最近一次修改时间戳来判断。来举个例子：假设客户端向服务器端请求一个文件，为了让资源被再次请求时能通过协商缓存机制使用本地缓存。首次返回该资源的响应头中会包含一个 last-modified 的字段，字段的值表示资源最后修改的时间。当刷新页面时，该资源使用的是协商缓存，浏览器无法确认本地缓存是否过期，然后向服务器发起一次 GET 请求，进行缓存有效性的协商，本次请求的请求头中包含一个 if-unmodified-since 字段，字段的值是上次响应头中的 last-modified 字段的值。</p>
<h2 id="last-modified-的不足之处"><a href="#last-modified-的不足之处" class="headerlink" title="last-modified 的不足之处"></a>last-modified 的不足之处</h2><p>last-modified 存在两个缺陷：</p>
<ol>
<li>它只是根据资源最后的修改时间进行判断，虽然请求的文件资源进行了编辑，但内容并没有改变，时间也会更新。这就导致了协商缓存时关于有效性的判断验证失效，就要重新进行资源的请求。</li>
<li>由于文件资源修改的时间单位是秒，如果文件修改很频繁。比如，几百毫秒内改一次，就无法识别出该文件资源的更新。</li>
</ol>
<h2 id="ETag-和-if-none-match"><a href="#ETag-和-if-none-match" class="headerlink" title="ETag 和 if-none-match"></a>ETag 和 if-none-match</h2><p>为了弥补通过时间判断的不足，HTTP 1.1 加入了 ETag（实体标签）的头信息。</p>
<p>ETag 表示资源的特定标识符，类似文件指纹。作用上面也有提到，这里不过多讲解。</p>
<p>当响应头同时存在 last-modified 和 ETag 这两个字段时，会以 ETag 为准。再次对该资源发起请求时，会将之前的响应头中 ETag 的值当作这次请求中 if-none-match 字段的值，发送给服务器进行缓存有效性验证。如果验证缓存有效，就返回 304 状态码响应重定向到本地缓存。</p>
<h2 id="ETag-的不足之处"><a href="#ETag-的不足之处" class="headerlink" title="ETag 的不足之处"></a>ETag 的不足之处</h2><p>ETag 的出现并不是 last-modified 的代替品，而是一种补充方案，它还是存在弊端的。</p>
<ul>
<li>如果资源比较大，数量多而且修改频繁的话，那么生成 ETag 的过程会影响到服务器的性能。</li>
<li>上面也讲了 ETag 还分强 ETag 和弱 ETag。</li>
<li>强 ETag 值是根据资源内容进行生成，保证每个字节都相同。</li>
<li>弱 ETag 值是根据资源的部分属性值来生成，生成速度快但是无法保证每个字节都相同。</li>
</ul>
<p>如果浏览器走的是协商缓存，并且资源没发生改变，服务器端会返回 304 状态响应码告诉浏览器获取本地缓存的资源即可。</p>
<p><img src="https://static001.geekbang.org/infoq/df/df805f409b1b858e05e43ba05af2996a.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<h2 id="HTTP-的缺点"><a href="#HTTP-的缺点" class="headerlink" title="HTTP 的缺点"></a>HTTP 的缺点</h2><p>HTTP 协议主要的不足之处有以下几点。</p>
<ul>
<li><strong>通信使用明文，内容会被窃听</strong></li>
<li><strong>不验证通信方的身份，可能遭遇伪装</strong></li>
<li><strong>无法证明报文的完整性，可能已遭到篡改</strong></li>
</ul>
<h2 id="通信使用明文，内容会被窃听"><a href="#通信使用明文，内容会被窃听" class="headerlink" title="通信使用明文，内容会被窃听"></a>通信使用明文，内容会被窃听</h2><p>HTTP 协议本身没有加密功能，所以无法做到对通信请求和响应内容进行加密。</p>
<h2 id="TCP-IP-是会被窃听的网络"><a href="#TCP-IP-是会被窃听的网络" class="headerlink" title="TCP/IP 是会被窃听的网络"></a>TCP/IP 是会被窃听的网络</h2><p>由于 TCP/IP 协议的工作机制，通信内容在所有通信线路上都有可能遭到窥视。不管是哪个角落的服务器在跟客户端进行通信，通信的线路上的一些设备都不可能是个人物品。所以不排除在某个环节上遭到恶意窥视的行为。即使进行加密处理，也会被窥视到通信的内容。窃听相同端上的通信并不是难事，只要收集在网络上流动的数据包就行。可以通过抓包和嗅探器工具来收集数据包。</p>
<h2 id="解决方案-加密处理防止窃听"><a href="#解决方案-加密处理防止窃听" class="headerlink" title="解决方案: 加密处理防止窃听"></a>解决方案: 加密处理防止窃听</h2><p>最常见的两种加密方式是通信加密和内容加密</p>
<h2 id="通信加密"><a href="#通信加密" class="headerlink" title="通信加密"></a>通信加密</h2><p>HTTP 协议中本身没有加密机制，但可以通过 <strong>SSL（Secure Socket Layer 安全套阶层）</strong> 或 <strong>TLS（Transport Layer Security 安全传输层协议）</strong> 的组合使用，加密 HTTP 的通信内容。用 SSL 建立安全通信线路后，就可以在这条线路上进行 HTTP 通信。和 SSL 组合使用的 HTTP 叫做 <strong>HTTPS （HTTP Secure 超文本传输安全协议）</strong> 或 HTTP over SSL。</p>
<h2 id="内容加密"><a href="#内容加密" class="headerlink" title="内容加密"></a>内容加密</h2><p>由于 HTTP 协议中没有加密机制，那么可以对传输的内容本身进行加密。也就是把 HTTP 报文中包含的内容进行加密处理。在这种情况下，客户端需要对 HTTP 报文主体(body)进行加密处理后再发送请求。要做到内容的加密，前提是客户端和服务器端同时具有加密和解密的机制。主要应用在 Web 服务器中。该方式不同于 SSL 和 TLS 把整个通信线路加密处理，所以内容还是会有被篡改的可能。</p>
<h2 id="不验证通信放的身份可能遭遇伪装"><a href="#不验证通信放的身份可能遭遇伪装" class="headerlink" title="不验证通信放的身份可能遭遇伪装"></a>不验证通信放的身份可能遭遇伪装</h2><p>HTTP 协议的请求和响应都不会对通信方进行确认。</p>
<h2 id="任何人都可以发起请求"><a href="#任何人都可以发起请求" class="headerlink" title="任何人都可以发起请求"></a>任何人都可以发起请求</h2><p>在 HTTP 协议通信时，由于不存在确定通信方的处理步骤，任何人都可以发起请求。服务器只要收到请求，不管是谁都会返回一个响应（仅限发送端的 IP 地址和端口号没被 Web 服务器设置限制访问的前提下）。也就是来者不拒。</p>
<ul>
<li>有可能是伪装的服务器。</li>
<li>有可能是伪装的客户端。</li>
<li>无法确定正在通信的对方是否具备访问权限。因为某些 Web 服务器上保存有重要的信息，只想发给特定用户通信的权限。</li>
<li>无法判断请求是从哪来、出自谁手。</li>
<li>即使是无意义的请求也照样接收。无法阻止大量请求下的 Dos 攻击（Denial of Service，拒绝服务器攻击）。</li>
</ul>
<h2 id="解决方案：查明对方的证书"><a href="#解决方案：查明对方的证书" class="headerlink" title="解决方案：查明对方的证书"></a>解决方案：查明对方的证书</h2><p>虽然使用 HTTP 协议无法确定通信方，但使用 SSL 可以。SSL 除了加密处理外，还用了一种证书的手段，用于确认通信方。证书是由值得信任的第三方机构颁发，用来证明服务器和客户端是真实存在的。</p>
<p>通过证书，以证明通信方就是意料中的服务器，对个人来说，减少了个人信息泄露的危险。另外，客户端持有证书即可完成个人身份的确认，也可用于对 Web 网站的认证环节。</p>
<h2 id="无法证明报文完整性，可能已篡改"><a href="#无法证明报文完整性，可能已篡改" class="headerlink" title="无法证明报文完整性，可能已篡改"></a>无法证明报文完整性，可能已篡改</h2><h2 id="收到的内容不完整"><a href="#收到的内容不完整" class="headerlink" title="收到的内容不完整"></a>收到的内容不完整</h2><p>没有任何办法确认，发出去的请求或响应和接收到的请求或响应是前后相同的。有可能在中途被篡改成其他的内容，即使内容是真的被改了，接收方也不会知道。</p>
<h2 id="解决方案：MD5-和-SHA-1"><a href="#解决方案：MD5-和-SHA-1" class="headerlink" title="解决方案：MD5 和 SHA-1"></a>解决方案：MD5 和 SHA-1</h2><p>可以使用 MD5 和 SHA-1 等散列值校验方法，以及用来确认文件的数字签名方法(PGP 签名)对内容进行加密。但是用这些方法也无法保证正确，因为 MD5 和 PGP 本身被修改的话，用户也不会知道。</p>
<h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>HTTP 加上加密处理和认证以及完整性保护机制就是 HTTPS</p>
<h2 id="HTTPS-是身披-SSL-外壳的-HTTP"><a href="#HTTPS-是身披-SSL-外壳的-HTTP" class="headerlink" title="HTTPS 是身披 SSL 外壳的 HTTP"></a>HTTPS 是身披 SSL 外壳的 HTTP</h2><p>HTTPS 不是应用层的一种新协议。只是 HTTP 通信接口部分用 SSL 和 TLS 协议代替而已。之前是 HTTP 和 TCP 进行通信，用了 SSL 之后，就变成了 HTTP 先和 SSL 通信，之后 SSL 和 TCP 通信。</p>
<p><img src="https://static001.geekbang.org/infoq/68/6886d2607d662d9f3b8288b5bd2786af.jpeg?x-oss-process=image/resize,p_80/auto-orient,1" alt="img"></p>
<p>使用 SSL 之后，HTTP 就有了 HTTPS 的加密、证书和完整保护性这些功能。</p>
<h2 id="加密方式"><a href="#加密方式" class="headerlink" title="加密方式"></a>加密方式</h2><p>SSL 用的是公开密钥加密的处理方式。加密方法中的加密算法是公开的，密钥则是保密的。通过这种方式可以保持加密方法的安全性。</p>
<p>加密和解密都会用到密钥。没有密钥就没办法对密码解密，任何人只要有密钥就可以进行解密，如果密钥被攻击者获得，那么加密也就没有意义了。</p>
<h2 id="对称加密"><a href="#对称加密" class="headerlink" title="对称加密"></a>对称加密</h2><p>加密和解密同用一个密钥的方式叫做共享密钥加密，也称为对称密钥加密。也就是说，客户端和服务器端共用一个密钥对消息进行加密。客户端在发送请求时，会用密钥对消息加密。服务器收到后，再用密钥对消息进行解密。</p>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><p>对称加密虽然保证了消息保密性，但客户端和服务器端用的都是同一个密钥，如果说在传输的过程中出现了中间人或攻击者。密钥就有可能落到攻击者手中，这样就对消息加密就没有什么意义了。</p>
<h2 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h2><p>非对称加密解决了对称加密的缺点。非对称加密用的是一对非对称的密钥。一把叫做私有密钥，另一把叫做公开密钥。私有密钥只能是自己所拥有，而公开密钥则是任何人都可以拿到。</p>
<p>当客户端发送消息前，使用公共密钥进行加密，而服务器收到消息后，使用私有密钥进行解密。</p>
<h2 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h2><p>非对称加密需要在发送端在发送消息时，用公钥加密。但公钥是任何人都可以拿到，中间人也可以。中间人虽然不知道接收方的私钥是什么，但可以截获发送端的公钥，自己另外生成一把公钥或者篡改公钥，把公钥发给接收端。而且非对称加密处理起来比对称加密的方式更加复杂，这样就导致了效率变低。</p>
<h2 id="混合加密机制"><a href="#混合加密机制" class="headerlink" title="混合加密机制"></a>混合加密机制</h2><p>HTTPS 用的就是对称加密和非对称加密两者的混合加密。使用对称加密的好处是解密效率快，使用非对称加密的好处是在传输消息的过程中不会被破解。即使截获了数据，没有对应的私钥，也无法对消息进行破解。</p>
<h2 id="摘要算法"><a href="#摘要算法" class="headerlink" title="摘要算法"></a>摘要算法</h2><p>数字摘要是采用 Hash 函数将需要加密的明文 “摘要” 成一串固定长度（128 位）的密文，这串密文又称为数字指纹，它有固定长度，而且不同的明文摘要成密文，其结果总是不同，而同样的明文摘要必须一致。数字摘要是 HTTPS 能确保数据完整性和防篡改的根本原因。</p>
<h2 id="数字签名"><a href="#数字签名" class="headerlink" title="数字签名"></a>数字签名</h2><p>数字签名是非对称加密和数字摘要两项技术的应用，它将摘要信息用发送者的私钥加密，和原文一起发给接收者。接收者只有用发送者的公钥才能解密被加密的摘要信息，然后用 Hash 函数对收到的原文产生一个摘要信息，与解密的摘要信息对比。如果一样，那就说明收到的信息是完整的。否则说明信息被修改过，因此数字签名能够验证信息的完整性。</p>
<h2 id="签名是加密的校验码"><a href="#签名是加密的校验码" class="headerlink" title="签名是加密的校验码"></a>签名是加密的校验码</h2><p>数字签名是附加在报文上的特殊加密校验码。使用数字签名有以下两点好处。</p>
<ul>
<li>签名能确定消息是由发送方签名并发过来的，因为别人假冒不了发送方的签名。</li>
<li>签名能确定消息的完整性，证明数据没有被篡改过。</li>
</ul>
<p>数字签名的过程如下：明文 -&gt; hash 运算 -&gt; 摘要 -&gt; 私钥加密 -&gt; 数字签名</p>
<h2 id="数字证书"><a href="#数字证书" class="headerlink" title="数字证书"></a>数字证书</h2><p>数字证书（CA）就像我们的身份证一样，信息都是唯一性的。它是属于可信任的一些第三方机构所有。证书包含了以下的信息。</p>
<ul>
<li>证书的发布机构 CA</li>
<li>证书的有效期</li>
<li>公钥</li>
<li>证书所有者</li>
<li>签名</li>
</ul>
<p>数字证书还包括对象的公钥，对象和所用签名算法的描述信息。所有人都可以创建一个数字证书，但并不是所有人都能获得签发权，从而为证书信息担保，并用它私有密钥签发证书。</p>
<h2 id="HTTPS-的工作流程"><a href="#HTTPS-的工作流程" class="headerlink" title="HTTPS 的工作流程"></a>HTTPS 的工作流程</h2><ol>
<li>首先是客户端向服务器端发起一个 HTTPS 请求。</li>
<li>服务器端返回公钥证书给客户端。</li>
<li>客户端收到公钥证书后，用证书的公钥验证数字签名，以确认服务器的公钥的真实性。</li>
<li>客户端用随机数生成器生成临时的会话密钥，然后用服务器的公钥对该会话密钥进行加密，发送给服务器端。</li>
<li>服务器收到后，用自己的密钥对会话密钥解密。</li>
<li>之后客户端和服务器端就开始了 HTTPS 通信。</li>
</ol>
<h2 id="SSL-和-TSL"><a href="#SSL-和-TSL" class="headerlink" title="SSL 和 TSL"></a>SSL 和 TSL</h2><p>HTTPS 用的是 SSL（Secure Socket Layer 安全套阶层） 和 TLS（Transport Layer Security 安全传输层协议）这两个协议。SSL 最开始是网景先倡导，后来网景凉了，就转移给了 IETF 的手里。IETF 以 SSL 3.0 为准，之后又定制了 TLS1.0、TLS1.1 和 TLS1.2。TLS 是以 SSL 为原型开发的协议。有时候统一称该协议为 SSL。</p>
<h2 id="为什么不一直用-HTTPS"><a href="#为什么不一直用-HTTPS" class="headerlink" title="为什么不一直用 HTTPS"></a>为什么不一直用 HTTPS</h2><p>凡事都具有两面性，不是说 HTTPS 安全就没有问题了。其实它还是存在一些问题的。在使用 SSL 时，它的处理速度会变慢。其原因有两种，一是通信慢，二是每次都进行加密通信，就导致消耗大量的 CPU 和内存资源，导致处理速度变慢。</p>
<ul>
<li>除了和 TCP 连接、发送请求和响应之外，还要和 SSL 进行通信。</li>
<li>另外 SSL 要进行加密处理，在服务器和客户端都要进行加密和解密的运算处理。</li>
<li>要用 HTTPS 通信，购买证书是必不可少的。</li>
</ul>
<p>当然可以用 SSL 加速（专用服务器）硬件来改善效率的问题。可以提高 SSL 的计算速度，分担负载。但只有在 SSL 处理时才发挥 SSL 加速器的效果。像一些非敏感的信息就用 HTTP 进行通信，对于敏感信息采用 HTTPS 通信，以节约资源。</p>
<h2 id="HTTP-和-HTTPS-的区别"><a href="#HTTP-和-HTTPS-的区别" class="headerlink" title="HTTP 和 HTTPS 的区别"></a>HTTP 和 HTTPS 的区别</h2><ol>
<li>HTTP 是以明文的方式进行传输，HTTPS 则是具有安全性的 SSL 加密传输协议。</li>
<li>HTTP 和 HTTPS 用的是两种不同的方式进行连接，端口号也不一样。前者是 80，后者是 443。</li>
<li>想要用 HTTPS 就得购买证书（CA），而免费的整数一般都很少，所以需要支付一定的费用。</li>
<li>HTTPS 对搜索引擎更友好，有利于 SEO ，优先索引 HTTPS 的网页。</li>
<li>HTTP 的连接简单，并且是无状态的。HTTPS 是由 SSL + HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 要安全。</li>
</ol>
<h2 id="解决-HTTP-1-x-瓶颈的-SPDY"><a href="#解决-HTTP-1-x-瓶颈的-SPDY" class="headerlink" title="解决 HTTP 1.x 瓶颈的 SPDY"></a>解决 HTTP 1.x 瓶颈的 SPDY</h2><h2 id="HTTP-1-x-的缺点"><a href="#HTTP-1-x-的缺点" class="headerlink" title="HTTP 1.x 的缺点"></a>HTTP 1.x 的缺点</h2><p>HTTP 1.x 主要有以下几个缺点：</p>
<ol>
<li>HTTP 1.0 只允许在一个 TCP 连接上发送一个请求，HTTP 1.1 中默认允许多个 TCP 连接。但是同一个 TCP 连接中，所有的数据通信都是按次序进行的，服务器一般是处理完一个响应之后，再继续处理下一个。这就造成了队首阻塞问题。</li>
<li>请求只能从客户端开始，客户端不可以接收除了响应之外的指令。</li>
<li>请求/响应头部不进行压缩就发送。头部信息越多延迟就越大。</li>
<li>发送冗长的头部，每次互相发送相同的头部导致资源浪费。</li>
<li>可随意选择数据压缩格式，非强制压缩发送。</li>
</ol>
<h2 id="SPDY"><a href="#SPDY" class="headerlink" title="SPDY"></a>SPDY</h2><p>SPDY 是由谷歌开发的基于 TCP 协议的应用层协议。目标是为了优化 HTTP 协议的性能，通过压缩、多路复用和优先级技术，缩短网页的加载时间并提高安全性。SPDY 协议的核心思想是尽量减少 TCP 的连接数。SPDY 并不是一种代替 HTTP 的协议，而是对 HTTP 协议的增强。</p>
<p>SPDY 没有改写 HTTP 协议，而是在 TCP/IP 的应用层和传输层之间通过新加会话层的形式运作。同时，考虑到安全问题，SPDY 规定通信中使用 SSL。</p>
<p><img src="https://static001.geekbang.org/infoq/08/08ba99b54bda63dacf5ee08784a6e677.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>
<p>SPDY 以会话层的形式加入，控制对数据的流动，但还是采用 HTTP 建立通信。因此，可以照常使用 HTTP 的请求方法、Cookie 以及 HTTP 报文等等。</p>
<h2 id="HTTP-2-0"><a href="#HTTP-2-0" class="headerlink" title="HTTP 2.0"></a>HTTP 2.0</h2><p>HTTP 2.0 可以说是 SPDY 的升级版（其实是基于 SPDY 设计的），但 HTTP 2.0 和 SPDY 还是存在一些不同的。主要有以下两点：</p>
<ol>
<li>HTTP 2.0 支持明文传输，而 SPDY 强制使用 HTTP。</li>
<li>HTTP 2.0 消息头的压缩算法用的是 HPACK，而 SPDY 用的是 DEFLATE。</li>
</ol>
<p>下面就简单的介绍一下 HTTP 2.0 新增的功能。由于 HTTP 2.0 设计到的东西太多了，之后我会一篇文章单独讲讲 HTTP 2.0。</p>
<ul>
<li><strong>二进制分帧层</strong>：HTTP 2.0 性能增强的核心就是新增的二进制分帧层，HTTP 1.x 是以换行符作为纯文本的分隔符，而 HTTP 2.0 把所有传输的信息分割成更小的<strong>消息</strong>和<strong>帧</strong>，并对它们采用二进制的格式编码。</li>
<li><strong>多向请求和响应</strong>：HTTP 2.0 中心的二进制分帧层，将 HTTP 消息分解成独立的帧，交错发送。然后在另一个端根据流标识符和头部把它们重新组装。解决了 HTTP 1.x 的队首阻塞问题。</li>
<li><strong>请求优先级</strong>：把 HTTP 消息分解成多个独立的帧后，就可以通过优化这些帧的交错和传输顺序进一步性能优化。</li>
<li><strong>服务器推送</strong>：服务器可以对一个客户端请求发送多个响应。服务器还可以向客户端推送资源而且无需客户端明确的请求。</li>
<li><strong>头部压缩</strong>：在 HTTP 2.0 中，使用了 HPACK（HTTP2 头部压缩算法）压缩格式对传输的头部进行编码，减少了头部的大小。并在两端维护了索引表，用于记录出现过的头部，之后在传输过程中就可以传输已经记录过的头部健名，对端收到数据后就可以通过键名找到对应的值。</li>
</ul>
<p>如果想要了解更多 HTTP2.0 的知识可以看看《Web 性能权威指南》这本书，里面讲得挺详细的。</p>
<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><h2 id="OSI-模型"><a href="#OSI-模型" class="headerlink" title="OSI 模型"></a>OSI 模型</h2><p>网络架构模型除了 <strong>TCP/IP 模型</strong>之外，还有 <strong>OSI 模型</strong>。<strong>OSI</strong> 模型实际上是多了三层。</p>
<p><img src="https://static001.geekbang.org/infoq/74/7426d98162dcee25697ebeafb07f461c.jpeg?x-oss-process=image/resize,p_80/auto-orient,1" alt="img"></p>
<p>也就是上面所说的多加了 SSL 和 SPDY 这两个协议（都处于应用层）。</p>
<p>而数据链路层细分的话有两层：</p>
<ul>
<li><strong>数据链路层</strong>: 在不可靠的物理链路上，提供可靠的数据传输服务。包括组帧、物理编址、流量控制、差错控制、接入控制等等。</li>
<li><strong>物理层</strong>: 主要功能就是连接网络设备。</li>
</ul>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>前面也说到，HTTP 是无状态的协议，它不会对之前发送过的请求和响应的状态进行管理。假设，客户端的用户发送一个请求，服务器端收到请求后想知道这个请求是哪个家伙发过来的，那么就要有一个状态进行管理。而 Cookie 正是解决这类问题而出现。</p>
<p>从服务器端返回的响应头信息中有一个 Set-Cookie 的字段信息，告诉客户端保存 Cookie。在下次客户端向服务器端发送请求时，客户端会自动在请求头信息中加入 Cookie 的值发送出去。</p>
<p>服务器收到客户端发送过来的 Cookie 之后，会检查到底是从哪个客户端发送过的请求，然后对比服务器上的记录，最后得到了之前的状态信息。</p>
<h2 id="Set-Cookie"><a href="#Set-Cookie" class="headerlink" title="Set-Cookie"></a>Set-Cookie</h2><p>Set-Cookie 是属于响应头中的一个字段，它包含以下的值。</p>
<ul>
<li>NAME=VALUE: Cookie 的名称和值。</li>
<li>expires=DATE: Cookie 的有效期。</li>
<li>path=PATH: 把服务器上的文件目录作为 Cookie 的使用对象，如果没有设置，默认是文档所在的文件目录。</li>
<li>domain=域名: 作为 Cookie 适用对象的域名，如果没有设置，默认是创建 Cookie 的服务器的域名。</li>
<li>Secure: 只有在 HTTPS 时才会发送 Cookie。</li>
<li>HttpOnly: JavaScript 不能访问 Cookie。主要是为了防止跨站脚本攻击时 Cookie 的信息窃取。</li>
</ul>
<h2 id="请求头中的-Cookie-字段"><a href="#请求头中的-Cookie-字段" class="headerlink" title="请求头中的 Cookie 字段"></a>请求头中的 Cookie 字段</h2><p>Cookie 是请求头中的一个字段，它包含服务器通过 Set-Cookie 头部设置并存到客户端的值。如果接收多个 Cookie 时，可以以多个 Cookie 形式发送回去。</p>
<p><img src="https://static001.geekbang.org/infoq/08/08afa9083b83f1b36bb291f09b187559.webp?x-oss-process=image/resize,p_80/format,jpg" alt="img"></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/my-blog/about" rel="external nofollow noreferrer">Mutou Yogi</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://wtyx-2018.github.io/my-blog/my-blog/2021/04/05/HTTP%20%E6%98%AF%E4%BB%80%E4%B9%88/">https://wtyx-2018.github.io/my-blog/my-blog/2021/04/05/HTTP%20%E6%98%AF%E4%BB%80%E4%B9%88/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/my-blog/about" target="_blank">Mutou Yogi</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">No tag</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/my-blog/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/my-blog/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/my-blog/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/my-blog/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/my-blog/2021/04/12/%E6%80%BB%E6%89%80%E5%91%A8%E7%9F%A5%EF%BC%8Cjavascript%20%E6%98%AF%E4%B8%80%E9%97%A8%E4%BE%9D%E8%B5%96%E5%AE%BF%E4%B8%BB%E7%8E%AF%E5%A2%83%E7%9A%84%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%BC%B1%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%EF%BC%8C%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E4%BB%80%E4%B9%88%EF%BC%9F/">
                    <div class="card-image">
                        
                        
                        <img src="/my-blog/medias/featureimages/20.jpg" class="responsive-img" alt="javascript 是一门依赖宿主环境的单线程的弱脚本语言，这意味着什么？">
                        
                        <span class="card-title">javascript 是一门依赖宿主环境的单线程的弱脚本语言，这意味着什么？</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-04-12
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Mutou Yogi
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Current&nbsp;<i class="far fa-dot-circle"></i>
            </div>
            <div class="card">
                <a href="/my-blog/2021/04/05/HTTP%20%E6%98%AF%E4%BB%80%E4%B9%88/">
                    <div class="card-image">
                        
                        
                        <img src="/my-blog/medias/featureimages/7.jpg" class="responsive-img" alt="HTTP 是什么">
                        
                        <span class="card-title">HTTP 是什么</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-04-05
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Mutou Yogi
                            
                        </span>
                    </div>
                </div>

                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/my-blog/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/my-blog/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/my-blog/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/my-blog/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/my-blog/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/my-blog/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/my-blog/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2021</span>
            
            <span id="year">2019</span>
            <a href="/my-blog/about" target="_blank">Mutou Yogi</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://gitee.com/zhang-cunhui" class="tooltipped" target="_blank" data-tooltip="访问我的Gitee" data-position="top" data-delay="50">
    <i class="fa fa-github"></i>
</a>



    <a href="mailto:1181062873@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1181062873" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1181062873" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/my-blog/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/my-blog/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/my-blog/libs/materialize/materialize.min.js"></script>
    <script src="/my-blog/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/my-blog/libs/aos/aos.js"></script>
    <script src="/my-blog/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/my-blog/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/my-blog/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/my-blog/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/my-blog/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/my-blog/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
